# ใช้ Node.js เวอร์ชัน 18 เป็นเบสอิมเมจ
FROM node:22

# คัดลอกไฟล์ package.json และ package-lock.json ไปยังไดเรกทอรีทำงาน
COPY package*.json ./

# ติดตั้ง dependencies
RUN npm install

# คัดลอกไฟล์โปรเจกต์ทั้งหมดไปยังไดเรกทอรีทำงาน
COPY . .

# สร้างแอปพลิเคชันสำหรับ production
RUN npm run build

# เปิดพอร์ตที่แอปจะรัน
EXPOSE 3000

# คำสั่งเริ่มต้นเมื่อรันคอนเทนเนอร์
CMD ["npm", "start"]
